<div class="dashboard-header">
  <h1>Client Dashboard</h1>
  <p>Welcome, <%= user.name %>! Manage your requests and connect with experts.</p>
</div>

<div class="dashboard-grid">
  <!-- Stats Cards -->
  <div class="stats-container">
    <div class="stat-card">
      <div class="stat-icon bg-blue">
        <i class="fas fa-paper-plane"></i>
      </div>
      <div class="stat-content">
        <h3><%= requests.length %></h3>
        <p>Total Requests</p>
      </div>
    </div>
    
    <div class="stat-card">
      <div class="stat-icon bg-green">
        <i class="fas fa-check-circle"></i>
      </div>
      <div class="stat-content">
        <h3><%= requests.filter(r => r.status === 'accepted').length %></h3>
        <p>Accepted</p>
      </div>
    </div>
    
    <div class="stat-card">
      <div class="stat-icon bg-orange">
        <i class="fas fa-clock"></i>
      </div>
      <div class="stat-content">
        <h3><%= requests.filter(r => r.status === 'pending').length %></h3>
        <p>Pending</p>
      </div>
    </div>
    
    <div class="stat-card">
      <div class="stat-icon bg-purple">
        <i class="fas fa-users"></i>
      </div>
      <div class="stat-content">
        <h3><%= requests.filter(r => r.status === 'completed').length %></h3>
        <p>Completed</p>
      </div>
    </div>
  </div>
  
  <!-- Quick Actions -->
  <section class="quick-actions">
    <h2><i class="fas fa-bolt"></i> Quick Actions</h2>
    <div class="action-buttons">
      <a href="/search" class="btn btn-primary">
        <i class="fas fa-search"></i>
        <span>Find Experts</span>
      </a>
      <a href="/workers/my" class="btn btn-outline">
        <i class="fas fa-history"></i>
        <span>My Requests</span>
      </a>
    </div>
  </section>
  
  <!-- Recent Requests -->
  <section>
    <div class="section-header">
      <h2><i class="fas fa-paper-plane"></i> Recent Requests</h2>
      <a href="/workers/my" class="btn btn-sm btn-outline">View All</a>
    </div>
    
    <% if (requests.length > 0) { %>
      <div class="card-container">
        <% requests.slice(0, 3).forEach(request => { %>
          <div class="card">
            <div class="card-header">
              <h3><%= request.workerProfile ? 'Request to Expert' : 'Unknown Expert' %></h3>
              <span class="status-badge <%= request.status %>"><%= request.status %></span>
            </div>
            <div class="card-body">
              <div class="card-item">
                <i class="fas fa-user-tie"></i>
                <span><strong>Expert:</strong> <%= request.worker ? request.worker.name : 'N/A' %></span>
              </div>
              <% if (request.preferredDateTime) { %>
                <div class="card-item">
                  <i class="fas fa-calendar-alt"></i>
                  <span><strong>Date:</strong> <%= new Date(request.preferredDateTime).toLocaleDateString() %></span>
                </div>
                <div class="card-item">
                  <i class="fas fa-clock"></i>
                  <span><strong>Time:</strong> <%= new Date(request.preferredDateTime).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}) %></span>
                </div>
              <% } %>
              <div class="card-item">
                <i class="fas fa-comment"></i>
                <span><strong>Requirements:</strong> <%= request.message ? request.message.substring(0, 50) + (request.message.length > 50 ? '...' : '') : 'N/A' %></span>
              </div>
              <a href="/workers/<%= request.workerProfile %>" class="btn btn-sm">View Expert</a>
            </div>
          </div>
        <% }) %>
      </div>
    <% } else { %>
      <div class="empty-state">
        <i class="fas fa-paper-plane fa-3x"></i>
        <h3>No requests yet</h3>
        <p>Send your first request to an expert to get started.</p>
        <a href="/search" class="btn btn-primary">Find Experts</a>
      </div>
    <% } %>
  </section>
  
  <!-- All Requests -->
  <section>
    <div class="section-header">
      <h2><i class="fas fa-list"></i> All Requests</h2>
    </div>
    
    <% if (requests.length > 0) { %>
      <div class="table-responsive">
        <table class="data-table">
          <thead>
            <tr>
              <th>Expert</th>
              <th>Date & Time</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <% requests.slice(0, 5).forEach(request => { %>
              <tr>
                <td><%= request.worker ? request.worker.name : 'N/A' %></td>
                <td><%= request.preferredDateTime ? new Date(request.preferredDateTime).toLocaleString() : 'N/A' %></td>
                <td><span class="status-badge <%= request.status %>"><%= request.status %></span></td>
                <td>
                  <% if (request.status === 'accepted') { %>
                    <a href="/dashboard/track/<%= request._id %>" class="btn btn-sm btn-primary">Track</a>
                  <% } else if (request.status === 'completed') { %>
                    <a href="/payments/request/<%= request._id %>" class="btn btn-sm btn-info">Make Payment</a>
                  <% } else { %>
                    <span>-</span>
                  <% } %>
                </td>
              </tr>
            <% }) %>
          </tbody>
        </table>
      </div>
    <% } else { %>
      <div class="empty-state">
        <i class="fas fa-list fa-3x"></i>
        <h3>No requests found</h3>
        <p>You haven't sent any requests yet.</p>
      </div>
    <% } %>
  </section>
<style>
  .bg-blue {
    background-color: var(--primary-500);
  }
  
  .bg-green {
    background-color: var(--success-500);
  }
  
  .bg-orange {
    background-color: var(--accent-500);
  }
  
  .bg-purple {
    background-color: var(--secondary-500);
  }
</style>

<script>
</script>