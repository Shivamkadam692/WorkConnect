<div class="auth-container">
  <div class="auth-card">
    <div class="auth-header">
      <h2><i class="fas fa-user-tie"></i> Add Professional Profile</h2>
      <p>Create a profile to showcase your expertise to potential clients.</p>
    </div>
    
    <form method="post" class="form">
      <div class="form-group">
        <label for="workerName"><i class="fas fa-user"></i> Professional Name</label>
        <input id="workerName" name="workerName" placeholder="Your professional name" required />
      </div>
      
      <div class="form-group">
        <label for="contact"><i class="fas fa-phone"></i> Contact Information</label>
        <input id="contact" name="contact" placeholder="Phone number or email" required />
      </div>
      
      <div class="form-group">
        <label for="skills"><i class="fas fa-tools"></i> Skills (comma separated)</label>
        <input id="skills" name="skills" placeholder="e.g., Web Development, Marketing, Finance" required />
      </div>
      
      <div class="form-group">
        <label for="experience"><i class="fas fa-clock"></i> Years of Experience</label>
        <input id="experience" type="number" name="experience" placeholder="Years of experience" min="0" />
      </div>
      
      <div class="form-group">
        <label for="hourlyRate"><i class="fas fa-rupee-sign"></i> Hourly Rate (â‚¹)</label>
        <input id="hourlyRate" type="number" name="hourlyRate" placeholder="Your hourly rate" min="0" step="0.01" />
      </div>
      
      <div class="form-group">
        <label for="location"><i class="fas fa-map-marker-alt"></i> Location</label>
        <input id="location" name="location" placeholder="Start typing a city or state..." required />
        <div id="location-suggestions" class="suggestions-dropdown"></div>
      </div>
      
      <!-- Location Autocomplete Script -->
      <script>
        const locationInput = document.getElementById('location');
        const suggestionsContainer = document.getElementById('location-suggestions');
        
        let debounceTimer;
        
        locationInput.addEventListener('input', function() {
          const query = this.value.trim();
          
          // Clear previous timer
          clearTimeout(debounceTimer);
          
          // Hide suggestions if query is empty
          if (query.length === 0) {
            suggestionsContainer.style.display = 'none';
            return;
          }
          
          // Debounce API calls
          debounceTimer = setTimeout(() => {
            fetchLocationSuggestions(query);
          }, 300);
        });
        
        async function fetchLocationSuggestions(query) {
          try {
            const response = await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(query)}&countrycodes=IN&limit=5`);
            const data = await response.json();
            
            // Clear previous suggestions
            suggestionsContainer.innerHTML = '';
            
            if (data.length > 0) {
              // Show suggestions container
              suggestionsContainer.style.display = 'block';
              
              // Add suggestions
              data.forEach(item => {
                const suggestion = document.createElement('div');
                suggestion.className = 'suggestion-item';
                suggestion.textContent = item.display_name;
                suggestion.addEventListener('click', () => {
                  locationInput.value = item.display_name;
                  suggestionsContainer.style.display = 'none';
                });
                suggestionsContainer.appendChild(suggestion);
              });
            } else {
              suggestionsContainer.style.display = 'none';
            }
          } catch (error) {
            console.error('Error fetching location suggestions:', error);
            suggestionsContainer.style.display = 'none';
          }
        }
        
        // Hide suggestions when clicking outside
        document.addEventListener('click', function(event) {
          if (!locationInput.contains(event.target) && !suggestionsContainer.contains(event.target)) {
            suggestionsContainer.style.display = 'none';
          }
        });
      </script>
      
      <div class="form-group">
        <label for="description"><i class="fas fa-align-left"></i> Professional Description</label>
        <textarea id="description" name="description" placeholder="Describe your expertise and services..." rows="4"></textarea>
      </div>
      
      <div class="form-actions">
        <a href="/dashboard/worker" class="btn btn-outline"><i class="fas fa-arrow-left"></i> Back to Dashboard</a>
        <button type="submit" class="btn btn-primary"><i class="fas fa-plus-circle"></i> Add Profile</button>
      </div>
    </form>
  </div>
</div>